<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Verticalizer</title>
</head>
<body>
  <form id="converter">
    <textarea name="text" cols="40" rows="16">
縦書きの
ツイート作るよ
最上川

字面合わせに
全角スペースで埋めるので
実字数は増えます</textarea>
    <br>
    <button name="submit">縦書きにする</button>
    <output name="result"></output>
  </form>
  <script>
  converter.submit.onclick = e => {
    e.preventDefault()
    converter.text.value = verticalize(converter.text.value)
  }

  function verticalize(text) {
    return text
      .split('\n')
      .reduce((text, line) => text + '\n' + line + '\u3000'.repeat((text = text.split('\n').slice(-1)[0]).length > line.length ? text.length - line.length : 0))
      .split('\n')
      .map(str => str.split(''))
      .reduceRight((arr, line) => arr.map((str, index) => str + (index < line.length ? line[index] : '')))
      .join('\n')
      .replace(/ー/g, ' | ')
  }
  </script>
</body>
</html>
